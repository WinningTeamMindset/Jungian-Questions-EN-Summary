<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KVC Westerlo - Elite Recruitment Portal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { --primary: #1a2a6c; --secondary: #b21f1f; --success: #28a745; --bg: #f4f7f6; --text: #333; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: var(--text); padding: 10px; margin: 0; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { color: var(--primary); text-align: center; font-size: 1.6rem; text-transform: uppercase; margin-bottom: 5px; }
        .section-header { background: var(--primary); color: white; padding: 12px; margin-top: 30px; border-radius: 4px; font-weight: bold; font-size: 1.1rem; }
        .question { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .question p { font-weight: 600; margin-bottom: 12px; font-size: 1rem; }
        .options { display: flex; flex-direction: column; gap: 10px; }
        label { background: #f9f9f9; padding: 15px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; display: block; transition: 0.2s; -webkit-tap-highlight-color: transparent; }
        label:hover { background: #eef2ff; border-color: var(--primary); }
        input[type="radio"] { transform: scale(1.3); margin-right: 12px; vertical-align: middle; }
        #coach-section { display: none; margin-top: 50px; border: 4px dashed var(--secondary); padding: 25px; border-radius: 12px; background: #fffdfd; }
        .btn-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-top: 40px; }
        button { padding: 16px 24px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 1rem; color: white; min-width: 180px; }
        .btn-calc { background: var(--primary); }
        .btn-print { background: var(--secondary); }
        .btn-save { background: var(--success); }
        .btn-coach { background: #444; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.95rem; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background: var(--primary); color: white; }
        textarea { width: 100%; height: 100px; padding: 12px; border-radius: 6px; border: 1px solid #ddd; margin-top: 10px; box-sizing: border-box; font-family: inherit; }
        .summary-box { background: #eef2ff; padding: 15px; border-left: 5px solid var(--primary); margin: 15px 0; border-radius: 4px; }
        .pdf-page-break { page-break-before: always; height: 1px; }
        @media print { .btn-container, .btn-coach { display: none !important; } }
    </style>
</head>
<body>

<div class="container" id="assessment-content">
    <h1>Elite Performance Assessment</h1>
    <p style="text-align: center; color: #666; font-size: 0.9rem;">KVC WESTERLO HIGH-PERFORMANCE UNIT</p>

    <div class="section-header">Player Identification</div>
    <div class="question">
        <p>Full Name:</p>
        <input type="text" id="playerName" placeholder="Enter player name..." style="width: 100%; padding: 12px; border-radius: 6px; border: 1px solid #ddd; box-sizing: border-box;">
        <p>Target Position:</p>
        <input type="text" id="playerPosition" placeholder="e.g., Attacker, Defensive Midfield" style="width: 100%; padding: 12px; border-radius: 6px; border: 1px solid #ddd; box-sizing: border-box;">
    </div>

    <div id="survey-questions"></div>

    <div class="btn-container">
        <button class="btn-coach" onclick="unlockCoach()">Coach Access</button>
    </div>

    <div id="coach-section">
        <h2 style="color: var(--secondary); text-align: center;">CONFIDENTIAL COACHING ANALYSIS</h2>
        
        <div id="result-display" class="summary-box"></div>

        <div class="pdf-page-break"></div>
        <h3>Tipping Point Matrix (Segment Counts)</h3>
        <table>
            <thead><tr><th>Segment</th><th>Letter Count A</th><th>Letter Count B</th><th>Status</th></tr></thead>
            <tbody id="scoringBody"></tbody>
        </table>

        <div class="summary-box">
            <h4>Trait Meanings for KVC Westerlo</h4>
            <ul style="font-size: 0.9rem; padding-left: 20px;">
                <li><strong>E (Extrovert):</strong> Natural Communicator. Drives the auditory force needed to break the silent culture.</li>
                <li><strong>I (Introvert):</strong> Internal Processor. High risk of retreating during setbacks or "Relapse of Doubt".</li>
                <li><strong>S (Sensing):</strong> 50/50 V/K Talent. Focuses on technical "feel" and visual details.</li>
                <li><strong>N (Intuitive):</strong> Pattern Reader. Anticipates tactical moves and reframes negative instructions.</li>
                <li><strong>T (Thinking):</strong> Logic Shield. Immune to emotional contagion; treats misses as technical data.</li>
                <li><strong>F (Feeling):</strong> Solidarity Builder. Provides the emotional glue for team cohesion.</li>
                <li><strong>J (Judging):</strong> Process Pro. Strict adherence to standards and KPI protocols.</li>
                <li><strong>P (Perceiving):</strong> Warrior Adaptability. Thrives in match chaos and resets rapidly.</li>
            </ul>
        </div>

        <div class="pdf-page-break"></div>
        <h3>Doubt-Trap Interview & Resilience Verification</h3>
        <p><strong>1. Physical Drain Test:</strong> Observe vocal energy and coaching clarity under extreme fatigue.</p>
        <textarea id="note1" placeholder="Does their coaching remain specific and loud when breathless?"></textarea>
        
        <p><strong>2. Unfair Criticism Anchor:</strong> Logic vs. Ego. React to mischaracterized errors.</p>
        <textarea id="note2" placeholder="Do they stay logical (T) or become defensive/emotional?"></textarea>
        
        <p><strong>3. Incomplete Map Intuition:</strong> Natural leadership speed and VK orientation.</p>
        <textarea id="note3" placeholder="Did they take the pen and lead the 'coaching' without permission?"></textarea>

        <p><strong>Assessor Final Summary:</strong></p>
        <textarea id="coachComments" placeholder="Recruitment recommendation..."></textarea>
    </div>

    <div class="btn-container">
        <button class="btn-calc" onclick="calculateProfile()">Generate Result</button>
        <button class="btn-print" onclick="printPDF()">Print PDF Report</button>
        <button class="btn-save" onclick="saveDataFile()">Save Data File</button>
    </div>
</div>

<script>
    // Full 50-question logic mapped to Jungian Segments
    const questions = [
        ["TF", "When I face a major setback, my internal monologue is:", "Why me?", "Talk to someone.", "What is the lesson? Adjust.", "Forget it fast."],
        ["SN", "Relationship with failure?", "A wall.", "Avoid at all costs.", "A stepping stone.", "Temporary blow."],
        ["TF", "If dropped from the lineup, I would:", "Get quiet.", "Feel deep doubt.", "Increase intensity + Improve.", "Wait for coach."],
        ["JP", "Self-belief is most stable when:", "Getting praise.", "Preparation is 100%.", "Teammates are high energy.", "Winning easy."],
        ["JP", "Reaction to mistake causing a goal:", "Internalize frustration.", "Look for reassurance.", "Deep breath + Reset.", "Apologize."],
        ["SN", "A 'Growth Mindset' is:", "Follow rules.", "Embrace discomfort.", "Being most talented.", "Avoiding errors."],
        ["TF", "In 85th minute exhaustion, I think:", "Don't pass to me.", "Just survive.", "Mental strength beats talent.", "Fans lift me."],
        ["SN", "I feel most confident when:", "Playing familiar system.", "Challenged by new problem.", "Vibe is 10/10.", "Clear advantage."],
        ["TF", "Harsh teammate criticism on pitch:", "Defensive.", "Process data & Adjust.", "Energy drop.", "Wait until later."],
        ["JP", "Success is defined by:", "Final score.", "Execution and process.", "Status/Recognition.", "Group harmony."],
        // Questions 11-20 (Communication)
        ["EI", "In a silent locker room after loss:", "Stay silent.", "Vocal outcome-focused message.", "Analyze stats alone.", "Wait for captain."],
        ["EI", "Pitch communication preference:", "Lead by example (silent).", "Short, loud commands.", "Talk to 2-3 nearby.", "Correcting mistakes."],
        ["TF", "Teammate panicking during press:", "Avoid them.", "Calm verbal 'vibe change'.", "Yell to wake up.", "Hope for sub."],
        ["EI", "Natural role with strangers:", "Observer.", "Ice breaker/Talker.", "Speak for specific points.", "Follower."],
        ["TF", "Teammate skipping a cone:", "Ignore it.", "Call out immediately.", "Do the same.", "Mention privately."],
        ["TF", "Solidarity is built by:", "Off-pitch social.", "Daily accountability.", "Never criticize in public.", "Winning."],
        ["EI", "Reaction to bad ref call:", "Chase ref.", "Tell team: 'Ref done, next ball!'", "Internal anger.", "Look at coach."],
        ["EI", "Primary use of voice:", "Express frustration.", "Organize and keep energy high.", "Ask for ball.", "Technical info only."],
        ["EI", "Small talk in meet-and-greet:", "Exhausting.", "Build rapport & read people.", "Duty only.", "Easy."],
        ["EI", "Opinion in team meeting:", "Wait for seniors.", "Speak Outcome-Frame solution.", "Stay quiet.", "Only if asked."],
        // Questions 21-30 (VK / NLP)
        ["SN", "Learning a new tactic:", "Listen to theory.", "See board + Physical walk.", "Read notes.", "Feel emotions."],
        ["SN", "Best performance memory:", "Coach's words.", "Visual pictures + 'Feel'.", "Noise of crowd.", "Will to win."],
        ["SN", "Fixing technical error:", "Video + Physical drill.", "Talk to coach.", "Wait for nature.", "Study stats."],
        ["SN", "Match day focus:", "Track movements + 'Feel' duels.", "Cues from bench.", "Internal monologue.", "Manage emotions."],
        ["EI", "Style in 3 words:", "Quiet, Smart.", "Vocal, Physical, Sharp.", "Brave, Social.", "Fast, Lucky."],
        ["SN", "Response to 'Don't make a foul':", "Think of foul.", "Reframed: 'Stay clean'.", "Nervous.", "Hope not me."],
        ["SN", "Preferred video analysis:", "30 min theory.", "5 min powerful success clips.", "Mistake focus.", "Group setting."],
        ["SN", "Pitch intuition feels like:", "Voice in head.", "Visual picture/Physical pull.", "Logic.", "Adrenaline."],
        ["SN", "To get 'in the zone':", "Silence.", "Energy music + Physical contact.", "Personal KPIs.", "Visualize stadium."],
        ["SN", "Understand teammate's intent:", "Listening.", "Watching body shape + 'Feel'.", "Personality.", "Halftime talk."],
        // Questions 31-40 (Accountability)
        ["JP", "Gym/Physio phone policy:", "Stay connected.", "In the box/locker.", "Mirror seniors.", "Music only."],
        ["JP", "3-0 up intensity:", "Save energy.", "Hunt clean sheet + Goal.", "Depend on enemy.", "Show off."],
        ["JP", "Arriving 'on time':", "At start.", "15 mins before start.", "With majority.", "Not last."],
        ["JP", "Media praise handling:", "Read all.", "Ignore/External distraction.", "Social media share.", "Relief."],
        ["JP", "Correction during drill:", "Insulted.", "Listen + 'Feel' change.", "Explain why.", "Nod/Keep old way."],
        ["JP", "Complete professional is:", "Most talented.", "Standards when alone.", "No conflict.", "Popular."],
        ["EI", "Team travel habits:", "Isolated.", "Build team cohesion.", "Sleep/Movie.", "Clique talk."],
        ["JP", "Rules and protocols are:", "Bendable.", "Foundation of force.", "Coach's control.", "Annoying."],
        ["EI", "Role when injured:", "Stay home.", "Present and vocal support.", "Avoid club.", "Wait for staff."],
        ["JP", "Performance judgment:", "Win/Loss.", "KPIs and duties met.", "Media/Social.", "Enjoyment."],
        // Questions 41-50 (Resilience)
        ["JP", "3-1 down, 10 mins left:", "Protect stats.", "Celebrate next goal like winner.", "Hope for whistle.", "Blame."],
        ["TF", "Pitch crisis is:", "Tactical failure.", "Lead the Reset.", "Survival.", "Low-perf teammates."],
        ["EI", "Reaction after goal conceded:", "Head down.", "Chest out, Encouraging.", "Hands up/Angry.", "Look at coach."],
        ["TF", "A 'Warrior' is:", "Aggressive.", "10/10 Focus regardless of score.", "Emotionless.", "Loudest."],
        ["TF", "Coach getting angry:", "Nervous.", "Act as Energy Translator.", "Ignore.", "Personal attack."],
        ["TF", "Handle doubt relapse:", "Search for praise.", "Reset Protocol + Logic.", "Hope for easy win.", "Avoid ball."],
        ["TF", "Opponent dominates ball:", "Panic.", "Focus on Press triggers.", "Bored.", "Midfield anger."],
        ["TF", "Leader's job after loss:", "Identify mistakes.", "Support & Refocus individuals.", "Stay quiet.", "Defend team."],
        ["TF", "Fighting spirit trigger:", "No embarrassment.", "Commitment to the Force.", "Money.", "Hero desire."],
        ["EI", "One team change:", "Talent.", "Vocal Force & Accountability.", "Comfort.", "Days off."]
    ];

    function renderQuestions() {
        const container = document.getElementById('survey-questions');
        questions.forEach((q, i) => {
            const div = document.createElement('div');
            div.className = 'question';
            div.innerHTML = `<p>${i+1}. ${q[1]}</p>
                <div class="options">
                    <label><input type="radio" name="q${i}" value="a"> ${q[2]}</label>
                    <label><input type="radio" name="q${i}" value="b"> ${q[3]}</label>
                    <label><input type="radio" name="q${i}" value="c"> ${q[4]}</label>
                    <label><input type="radio" name="q${i}" value="d"> ${q[5]}</label>
                </div>`;
            container.appendChild(div);
        });
    }

    function unlockCoach() {
        if(prompt("Enter Coach Password:") === "kvc2025") {
            document.getElementById('coach-section').style.display = 'block';
            window.scrollTo(0, document.getElementById('coach-section').offsetTop);
        }
    }

    function calculateProfile() {
        let scores = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };
        questions.forEach((q, i) => {
            const sel = document.querySelector(`input[name="q${i}"]:checked`);
            if(!sel) return;
            const type = q[0];
            const val = sel.value;
            if(val === 'c') { // Elite options mostly mapped to 'c'
                if(type.includes("E")) scores.E++; if(type.includes("N")) scores.N++; if(type.includes("T")) scores.T++; if(type.includes("J")) scores.J++;
            } else if(val === 'a') {
                if(type.includes("I")) scores.I++; if(type.includes("S")) scores.S++; if(type.includes("F")) scores.F++; if(type.includes("P")) scores.P++;
            } else if(val === 'b') {
                if(type.includes("E")) scores.E++; if(type.includes("F")) scores.F++; if(type.includes("J")) scores.J++;
            }
        });

        const profile = [(scores.E >= scores.I ? "E" : "I"), (scores.S >= scores.N ? "S" : "N"), (scores.T >= scores.F ? "T" : "F"), (scores.J >= scores.P ? "J" : "P")].join('');
        const fit = { "ESTP": "The Dynamo (Finisher/Back)", "ENTJ": "The Commander (Def Mid)", "ESFP": "The Performer (Off Mid)", "ENFJ": "The Protagonist" };
        
        document.getElementById('result-display').innerHTML = `<h3>Calculated Profile: ${profile}</h3><p><strong>Primary Recruitment Match:</strong> ${fit[profile] || "Mixed Profile (Review Counts)"}</p>`;
        
        document.getElementById('scoringBody').innerHTML = `
            <tr><td>Energy</td><td>Extrovert: ${scores.E}</td><td>Introvert: ${scores.I}</td><td>${scores.E > 8 ? 'ELITE FORCE' : 'LOW ENERGY'}</td></tr>
            <tr><td>Information</td><td>Sensing: ${scores.S}</td><td>Intuition: ${scores.N}</td><td>${scores.S > 5 ? 'V/K DOMINANT' : 'THEORY PLAYER'}</td></tr>
            <tr><td>Decision</td><td>Thinking: ${scores.T}</td><td>Feeling: ${scores.F}</td></tr>
            <tr><td>Lifestyle</td><td>Judging: ${scores.J}</td><td>Perceiving: ${scores.P}</td></tr>`;
    }

    function printPDF() {
        const name = document.getElementById('playerName').value || "Player";
        const element = document.getElementById('assessment-content');
        html2pdf().from(element).set({
            margin: [10, 10],
            filename: `KVC_Elite_Report_${name.replace(/\s+/g, '_')}.pdf`,
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2, useCORS: true },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        }).save();
    }

    function saveDataFile() {
        const name = document.getElementById('playerName').value || "Unnamed_Player";
        const result = document.getElementById('result-display').innerText;
        const matrix = document.getElementById('scoringTable').innerText;
        const notes = document.getElementById('coachComments').value;
        const blob = new Blob([`KVC WESTERLO REPORT\nNAME: ${name}\n\nRESULT:\n${result}\n\nMATRIX:\n${matrix}\n\nINTERVIEW NOTES:\n${notes}`], { type: 'text/plain' });
        const a = document.createElement('a');
        a.download = `${name.replace(/\s+/g, '_')}_Archive.txt`;
        a.href = URL.createObjectURL(blob);
        a.click();
    }

    renderQuestions();
</script>
</body>
</html>